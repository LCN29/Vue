<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="../../js/vue.js" ></script>
	</head>
	<body>
		
		<div id="example" >
			<!-- 页面只能有一个焦点，被后者拿去了 -->
			<input type="text" v-focus/>
			<input type="text" v-focus2/>
		</div>
		
		<div id="example2" >
			<input type="text" v-focus2/>
		</div>
		
		<div id="example3" >
			<div id="hook-arguments-example" v-demo:foo.a.b="message"></div>
		</div>
		
		<script>
			
			/*====================================*/
			/* 全局注册，自定义指令 */
			Vue.directive('focus', {
				inserted: function (el) {
					// 聚焦元素
    				el.focus();
				}
			});
			
			/*====================================*/
			/* 局部注册 */
			var exaxmple = new Vue({
				el :"#example",
				directives: {
					focus2: {
						inserted: function (el) {
							 el.focus();
						}
					}
				}
			});
			
			/*====================================*/
			/* 钩子函数 */
			var exaxmple2 = new Vue({
				el :"#example2",
				directives: {
					focus2: {
						
						bind : function(el, binding, vnode){
							/*只调用一次，指令第一次绑定到元素时调用，
							 * 用这个钩子函数可以定义一个在绑定时执行
							 * 一次的初始化动作*/
							console.log("第一次绑定");
						},
						inserted: function (el) {
							 el.focus();
							 console.log("绑定元素插入父节点时调用 ");
						},
						update :function(){
							console.log("所在组件的 VNode 更新时调用");
						},
						componentUpdated : function(){
							console.log("所在组件的 VNode 及其孩子的 VNode 全部更新时调用");
							
						},
						unbind :function(){
							console.log("只调用一次，指令与元素解绑时调用");
						}
						/*
						 	钩子参数 el binding vnode oldVnode
						 	 binding : {
						 	 	name：指令名，不包括 v- 前缀
						 	 	value：指令的绑定值，例如：v-my-directive="1 + 1", value 的值是 2
						 	 	oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子
						 	 	中可用。无论值是否改变都可用。
						 	 	expression：绑定值的字符串形式。例如 v-my-directive="1 + 1" ，
						 	 				expression 的值是 "1 + 1"
						 	 	arg：传给指令的参数。例如 v-my-directive:foo，arg 的值是 "foo"。
								modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar, 
								修饰符对象 modifiers的值是 { foo: true, bar: true }。
						 	 }
						 * */
					}
				}
			});
			
			/*===================================================*/
			Vue.directive('demo', {
			  	bind: function (el, binding, vnode) {
				    var s = JSON.stringify
				    	el.innerHTML =
				      		'name: '       + s(binding.name) + '<br>' +
				      		'value: '      + s(binding.value) + '<br>' +
				      		'expression: ' + s(binding.expression) + '<br>' +
				      		'argument: '   + s(binding.arg) + '<br>' +
				      		'modifiers: '  + s(binding.modifiers) + '<br>' +
				      		'vnode keys: ' + Object.keys(vnode).join(', ')
				  	}
			});
			
			new Vue({
			  	el: '#example3',
			  	data: {
			    	message: 'hello!'
			  	}
			});
			
		/*========================================*/
		/*  
			只在bind 和 update 钩子上做重复动作并且不想关心其它的钩子函数。
			可以简写:
			Vue.directive('color-swatch', function (el, binding) {
				el.style.backgroundColor = binding.value
			})
 		*/
 		
 		
 		
 		/*========================================*/
 		/*
		 	如果指令需要多个值，可以传入一个 JavaScript 对象字面量
		 	指令函数能够接受所有合法类型的 JavaScript 表达式。
		 	
		 	<div v-demo="{ color: 'white', text: 'hello!' }"></div>
		 	Vue.directive('demo', function (el, binding) {
			  	console.log(binding.value.color) // => "white"
			  	console.log(binding.value.text)  // => "hello!"
			})
	   */
		</script>
	</body>
</html>
